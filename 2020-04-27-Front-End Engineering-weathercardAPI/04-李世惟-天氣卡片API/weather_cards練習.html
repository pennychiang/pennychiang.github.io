<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <style>
        .cards {
            display: flex;
            flex-wrap: wrap;
        }
        /* 圖片 */
        img {
            width: 100%;
        }
        /* 卡片寬度百分比 */
        .card {
            max-width: 33.33%;
            margin: auto;
        }
        /* 內容 */
        .content {
            text-align: center;
        }
        /* 時間 */
        .time   {
            text-align: center;
            font-size: 36px;
        }
            
        
    </style>
</head>

<body>
    <h1 class="time">現在時間</h1>
    <div class="cards">
 


        <script>
            fetch('https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWB-94527DCE-5E29-4FED-B800-4496E25D1376')

                .then(function (response) {
                    return response.json();
                })
                .then(function (weather_data) {


                    var locations = weather_data.records.location
                    locations.forEach(function (content) {

                        var location_Name = content.locationName;//地點

                        var sintro = content.weatherElement[3].time[0].parameter.parameterName;//天氣描述

                        var maxT = content.weatherElement[4].time[0].parameter.parameterName;//最高溫

                        var minT = content.weatherElement[2].time[0].parameter.parameterName;//最低溫


                        var sweather = content.weatherElement[0].time[0].parameter.parameterName;//代碼

                        console.log(content)

                        var weather_img = ''
                        if (sweather == 1) {
                            weather_img = "./img/cloud.png"
                        } else if (sweather > 1 && sweather < 8) {

                            weather_img = "./img/rain.png"
                        } else {
                            weather_img = "./img/sun.png"
                        }

                        var cards = document.querySelector(".cards")
                        cards.innerHTML += `

                    <div class="card">
                    <div class="weather"><img src=${weather_img} alt=""></div>
                    <div class="content">
                        <h1 class="locationb">台中市${location_Name}</h1>
                        <h2 class="weather">天氣晴${sweather}</h2>
                        <h2 class="max-temper">最高溫度${maxT}</h2>
                        <h2 class="min-temper">最低溫度${minT}</h2>
                        <h2 class="CI">${sintro}</h2>
                    </div>
                </div>
            </div>
                    
                    `


                    })

                    var times = document.querySelector(".time")
                    var date = new Date();
                    var current_data = date.getFullYear() + "年" + (date.getMonth() + 1) + "月" + (date.getDate()) + "日"
                    var current_time = date.getHours() + "時" + (date.getMinutes()) + "分"
                    times.innerHTML += `<h1 class="time">${current_data}<br>${current_time}</h1>`

                    console.log(current_data)




                })
        </script>

</body>

</html>