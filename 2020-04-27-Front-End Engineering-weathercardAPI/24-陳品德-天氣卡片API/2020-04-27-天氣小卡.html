<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .cards{
            display: flex;
            flex-wrap: wrap;
            margin-left: 120px;
            
        }

        .card{
            max-width: 25%;
            background-color: cornflowerblue;
            text-align: center;
            line-height: 30px;
            margin: 20px 20px;

        }
        img{
            margin-top: 50px;
            width: 50%;
        }
      
      .time{
          text-align: center;
      }
     
    </style>
</head>
<body>
    <h1 class="time"></h1>
    <div class="cards">
        <div class="card">
            <div class="weather_img">
                <img src="https://png.pngtree.com/png-clipart/20190904/original/pngtree-sunny-weather-icon-png-image_4490965.jpg" alt="">
            </div>
                <h1 class="location">台中市</h1>
                <div class="word">
                     <div class="weather">天氣概況 : 多雲</div>

                     <div class="maxtem">最高溫度 : 21度</div>

                     <div class="mintem">最低溫度 : 18度</div>

                      <div class="feel">氣候敘述 : 濕冷</div>
                  </div>
        </div>

    

    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
        fetch('https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-C0032-001?Authorization=CWB-31289B80-6CDB-4F3C-A899-8C1BF1A79268&format=JSON')
            .then(function(response) {
                return response.json();
            })

            .then(function(weather_data){
                var locations = weather_data.records.location

                locations.forEach(function(location) {
                    var location_name = location.locationName
                    //地區
                    
                    var Wx = location.weatherElement[0].time[0].parameter.parameterName
                    //天氣概況

                    var MaxT = location.weatherElement[4].time[0].parameter.parameterName
                    //最高氣溫
                  
                    var MinT = location.weatherElement[2].time[0].parameter.parameterName
                     //最低氣溫

                    var CI = location.weatherElement[3].time[0].parameter.parameterName
                    //敘述

                    var Wx_vaule = location.weatherElement[0].time[0].parameter.parameterValue

                    console.log(Wx_vaule)

                    var weather_cards = document.querySelector(".cards")

                    var weather_img =''

                    if (Wx_vaule == 1){
                        weather_img = 'https://png.pngtree.com/png-clipart/20190630/original/pngtree-vector-cloudy-icon-png-image_4161839.jpg'
                    }else if (Wx_vaule > 1 && Wx_vaule < 8 ){
                        weather_img = 'https://png.pngtree.com/png-clipart/20190904/original/pngtree-sunny-weather-icon-png-image_4490965.jpg'
                    }else{
                        weather_img = 'https://lh3.googleusercontent.com/proxy/oncd9fCwZBC8DZ0xjxzChmi-gvYRMqA2dDcKJA8ZkyXHnDKF4Iec7BQb0ikEkm-q5CUA0trFreCFNAZMAuSpthkE_yHaxwq9IzG18L5wSOSxTcyMrrbprEborA'
                    }

                    weather_cards.innerHTML +=`
                    <div class="card">
                        <div class="weather_img">
                            <img src="${weather_img}" alt="">
                        </div>
                         <h1 class="location">${location_name}</h1>
                        
                         <div class="weather">天氣概況 : ${Wx}</div>

                         <div class="maxtem">最高溫度 : ${MaxT}度</div>

                         <div class="mintem">最低溫度 : ${MinT}度</div>

                        <div class="feel">氣候敘述 : ${CI}</div>
                            
                    </div>`
                });
                var time = document.querySelector(".time")
                var date = new Date();
                var current_date = date.getFullYear() + '年' + (date.getMonth() + 1) + '月' + date.getDate() + '日'

                var current_time = date.getHours() + ':' + date.getMinutes() 

                // console.log(current_time)

                time.innerHTML += `${current_date}<br> ${current_time}`

            })
    </script>
</body>
</html>